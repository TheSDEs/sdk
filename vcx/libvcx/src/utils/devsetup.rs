extern crate rusqlite;
extern crate rand;

use utils::constants;
use utils::libindy::signus::SignusUtils;
use schema::{create_new_schema, get_sequence_num};
use credential_def::create_new_credentialdef;
use utils::libindy::wallet;
use utils::libindy::pool;
use settings;

/* INSTITUTION/ENTERPRISE settings */
pub const AGENCY_ENDPOINT: &'static str = "https://enym-eagency.pdev.evernym.com";
pub const AGENCY_DID: &'static str = "YRuVCckY6vfZfX9kcQZe3u";
pub const AGENCY_VERKEY: &'static str = "J8Yct6FwmarXjrE2khZesUXRVVSVczSoa9sFaGe6AD2v";
pub const SDK_TO_REMOTE_DID: &'static str = "AQ2EZRY9JQ4ssjmZPL5MiU";
pub const SDK_TO_REMOTE_VERKEY: &'static str = "684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX";
pub const REMOTE_TO_SDK_DID: &'static str = "7csYfSY8b4hvqnu5K8nGQP";
pub const REMOTE_TO_SDK_VERKEY: &'static str = "4cDwBvDZy9aWWKf2uCYTSgffCNt7ffmY9nrMTHmqsG8z";
pub const INSTITUTION_DID: &'static str = "2hoqvcwupRTUNkXn6ArYzs";
pub const INSTITUTION_VERKEY: &'static str = "vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf";

/**
 * CONSUMER/USER settings
 * generated by running provision script with: --enterprise-seed=00000000000000000000001DIRECTION --agent-seed=00000000000000000000002DIRECTION
 */

pub const C_AGENCY_ENDPOINT: &'static str = "https://cagency.pdev.evernym.com";
pub const C_AGENCY_DID: &'static str = "dTLdJqRZLwMuWSogcKfBT";
pub const C_AGENCY_VERKEY: &'static str = "LsPQTDHi294TexkFmZK9Q9vW4YGtQRuLV8wuyZi94yH";
pub const C_SDK_TO_REMOTE_DID: &'static str = "QgUb4aHJ2cigGZCrEe7DHk";
pub const C_SDK_TO_REMOTE_VERKEY: &'static str = "DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q";
pub const C_REMOTE_TO_SDK_DID: &'static str = "7faARCpBNrEESKmvBejhV7";
pub const C_REMOTE_TO_SDK_VERKEY: &'static str = "4dhJ9JkxJm4n5QbYUR9r3KcUoC34yZJgXouRa2PKgMUE";
pub const C_INSTITUTION_DID: &'static str = "GXTZy9GzdtD2c1J88Jrn8C";
pub const C_INSTITUTION_VERKEY: &'static str = "9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc";


static DEV_ENTRIES: &[[&str; 3]; 6] = &[
    //Todo: Remove all cred_defs that don't have updated format
    // New Format Credential
    // cred_def id
    [
        r#"credential_definition::2hoqvcwupRTUNkXn6ArYzs:3:CL:1766"#,
        r#"{"ver":"1.0","id":"2hoqvcwupRTUNkXn6ArYzs:3:CL:1766","schemaId":"1766","type":"CL","tag":"tag_1","value":{"primary":{"n":"85670726087646066488336891386007395146305556020785156404966757195713172423986955829275928823412202983005765549138166337596332668624785356275948550610986515632538875110102050429019717504369266063638809652430822315438476137278121638815507179841204863531316774758999960126711889562112923837514443800514317850283729280669445713214512397849522852970250520293370628023987786705929473911332225339413513152159168735396418164891236803242880355529495511789926285886513711866888153594898997566248543528468311456283695047260619287918479341245429034220764647748023750379734414646287862293454795971898087728286784691920341838448137","s":"48895504024055719252282124618440232058031534848578206135619251949712121688349796673339582444526655952256150398883881904202664306756997119627142187434717046388168662462146844076408165774647180386889611380385206737420317505498283253791892302072045630142000088540673466971882187409804378946284051501750733152717016201472399077914429936717916077927804505295461957441501910114156041614644522082760602249253154580010217682011334844149015826117564300568719161008968336214132279816077151249203387682493650606783046769332337727646199564020036298735732045166838761808856151309786819668360706306503342310612842842062124990515546","rms":"55124238634198767896989190912124101801487011776550531049312447160008911915805858769203263214247391370128743503884750230894992254782534916308717726458864563628155979232903142401564296059864163993116031948911890205924327079681120806660699807472835450774884790086176364904829785801662277817643758929102665315811587053743443282945894114636938504801919057589706112243215182511501766391979818825291302920046183286660535979356067095059954835317286058731752097960834846597182298966990903096087503981356191560896022130918467713965170833073908476890040573633790507632479986867071213812818198795980743816619101188007440501420265","r":{"age":"79929972605764081923928169118109955937942596882038299609840432190450415157811414028241147734830796420864094155361194743493925473416381796864930611869347074266004915138968792384389845406841032932617719658958723436255082233865110377263741339609575613130365442308529531653910993817930343800065420103045380167088004170924054961037495215662518438865451963740401001283847185440825394520018755223445249822872186182845486469782047535826324765776595892468234832738275924057319494419924315628980630597998542045737997098745582930334130943856199983122683939253199677301975621648701332042693361932882058162761100616061426948348543","height":"43697654968550374797747350883307769567970107595424042848512805574659637490865223884741325220130310747401007524946961961047017845562355761877737426362173154583282318280916311623979478993637611920564627949258044084829387202664209592421968240469632555878492380839645647416942442137379046765198550490385273422331119919271550814358484905381475425919535178852951065764007839694862254089647294876933345977086717739906732049870169676494191089473481599081434093267678201897983959623427881632398981639133464999426686464855321081382181128345439646915285092638523056862612805951888745466468189250809324704764539941950199029121971","name":"27840566146221839094706715525346987738366515228135228017756831827072413169413046928694128965437408314119378107001248938784196721251527841073562061895194786118493253747136558581733075085838344732480789080916888662025859959411548242570533062010040515389432781495404344078319329362199606647755846054419196223861030019941622364423035731925193585767512559046965068800397626154240642187951468078469705108550096993645093767062853160029488519782473627003415507531882531954861438232231891721714417260941929814209174229666951402683368064286591984536839119460188912988900108628619550933316716732412362877261351972856300122725311","sex":"71158203193750814064645375984366289525023807285706974372053265087711762931967467457554424128570575799858299309138634525043581231453147467503639632480265606639514062588328430127779672922238978691997220142175467697734098017929945137388449540960291382353668274221326494232576453309184313723101468125996133583526118906042917884532786929639595465607719907949555179768645947946981446856348818792433233118639837742069342704294935667439277239300646544113048542552827641463282313161399477040781496613299883600376036871188455649194997160235641221885445254669885796118738018184793667058106666699310811507432030227134716212047333"},"rctxt":"46606974474612014334162813245959294798707146182345915725873320666416778586578709957582488065967215123844938147674294546045791142893529089026398918551206210643866813978533328370848453659996387385511962923603572107178623194018405428385190973505221119367320335540594532470787856455921337677668578139252475145354234311100004305690589456708027099064648417473658511653099151260531601662756845340171017245856745300084817459702221188800561693628267844595681982119133481934447591267321276462929855060721008153063898005475842096089126631737443304095112651960840345194478557131329368107262793271894132562017615592189048496339519","z":"60222862808154508281297023025259735001427343046551141959163454367838016848706795315248494477792881583013815346697369970553138110643231336620915400570174832562872183404972955224273797034336370218410043817991576265727516252943173790666762397154310941587925498280737589255324684234151269065685202719709047222912280174448619733169146108763804041628255034238795689634672673743584092325797165484935092319400849217787411837911919848315181813915271474347326056160289723217712312631600631662631140752133660467530823692485682501264500394540081047269717924751711699504457332780721631237562317459266291656316385680277090654170043"}}}"#,
        r#"2018-04-18 14:05:01"#
    ],
    [
        r#"credential_private_key::2hoqvcwupRTUNkXn6ArYzs:3:CL:1766"#,
        r#"{"p_key":{"p":"142632561446479716106721356962210173594556553945608795218866788080611092676164575157569767691174300956550089354923401593878893285691130030676105299831196077713993088377832108439437885363548197669957339135510693869061850448450894392167718531059425235973916112569110509107630777707534068592490648336897013781161","q":"150159832402281532899635064466370954472681002035520473700839188683878625830424353285731439360924923530608176746276650900072307372004785602329993411380485731883825391076229250594391298096030418274020295570775767899970170993903736953844146865756741220722343925910725840497550427849761031287948776518403160834009"},"r_key":null}"#,
        r#"2018-04-18 14:05:01"#
    ],
    [
        r#"credential_key_correctness_proof::2hoqvcwupRTUNkXn6ArYzs:3:CL:1766"#,
        r#"{"c":"81455034389059130581506970475392033040313255495112570189348030990050944959723","xz_cap":"313645697267968767252234073635675430449902008059550004460259716107399731378591839990019486954341409015811398444145390509019258403747288031702507727573872041899321045924287139508392740014051146807378366748171039375722083582850094590251566094137198468729226768809401256609008814847622114541957109991869490323195581928533376835343922482073783968747913611549869005687592623346914265913612170394649557294382253996246104002213172081216651539025706643350612557508228429410997102814965307308636524874409734625285377555470610010065029649043789306111101285927931757335536116856245613021564584847709796772325323716389295248332887528840195072737364278387101996545501723112970168561425282691953586374723401","xr_cap":{"age":"882754630824080045376337358848444600715931719237593270810742883245639461185815851876695993155364347227577960272007297643455666310248109151421699898719086697252758726897984721300131927517824869533193272729923436764134176057310403382007926964744387461941410106739551156849252510593074993038770740497381973934250838808938096281745915721201706218145129356389886319652075267352853728443472451999347485331725183791798330085570375973775830893185375873153450320600510970851511952771344003741169784422212142610068911032856394030732377780807267819554991221318614567131747542069695452212861957610989952712388162117309870024706736915145245688230386906705817571265829695877232812698581971245658766976413035","height":"987637616420540109240639213457114631238834322455397854134075974962516028070241761486895351636137675737583463907200584608953198912009428606796987435233170230262246507002244616435810064614719873830573727071246389627645604379157359983051337498205555868770767724876429776832782322071025598605854225056296405802351270140259313942108556513054492873024197036931111152136704979025907027537437514085689067466225661223523070057146052814725207863140129032189711026590245299845102901392525049014890473357388530510591717159458757929233202259332009161834669583439224425159885860519286698297401104830776447810193871233628235105641793685350321428066559473844839135685992587694149460959649026855973744322255314","name":"1546639434545851623074023662485597065284112939224695559955181790271051962463722945049040324831863838273446566781589598791986646525127962031342679728936610678403807319789934638790962870799709103831307094501191346766422178361730723105585107221227683700136793784629414737866344469139276697568820727798174438114746109084012381033673759358527018948810066386903378176283974585934466197449653414224049202874335628877153172622300824161652402616917051692229112366954543190460604470158025596786552965425465904108943932508335616457348969058666355825158659883154681844070175331759147881082936624886840666700175491257446990494466033687900546604556189308597860524376648979247121908124398665458633017197827236","sex":"716474787042335984121980741678479956610893721743783933016481046646620232719875607171626872246169633453851120125820240948330986140162546620706675695953306343625792456607323180362022779776451183315417053730047607706403536921566872327898942782065882640264019040337889347226013768331343768976174940163847488834059250858062959921604207705933170308295671034308248661208253191415678118624962846251281290296191433330052514696549137940098226268222146864337521249047457556625050919427268119508782974114298993324181252788789806496387982332099887944556949042187369539832351477275159404450154234059063271817130338030393531532967222197942953924825232879558249711884940237537025210406407183892784259089230597"}}"#,
        r#"2018-04-18 14:05:01"#
    ],
    [
        r#"full_schema_id::2hoqvcwupRTUNkXn6ArYzs:3:CL:1766"#,
        r#"2hoqvcwupRTUNkXn6ArYzs:2:schema_name:0.0.11"#,
        r#"2018-04-18 14:05:01"#
    ],
    // New Format Key Correctness Proof
//    [
//        "key_correctness_proof::2hoqvcwupRTUNkXn6ArYzs:Home Address:1.4:2hoqvcwupRTUNkXn6ArYzs",
//        r#"{"c":"8555253541554245344305351079388313043821365069629297255640200538622329722556","xz_cap":"64818256731588984794575029881576438712171978148821994354569423109505883511370051539530363090404289097908646608544866367046312481771587336183036163818849360474523320055058050733772575227932313793985470881830147160471852946598089626822740951538444260248405680001410943962258653118246973446307071417314391910474888369634752642195173997916292806072016186810315308257756689251031806948447462801785007243395079942815166817065271733596477143189406957903952991335446968764832960906258373699575234207180135806072152726528786138816315911998387303385565913657745597433033756984505440643451253917452841385494947936404135348354895376751800590086535707370194450915965147666804363452357419799188104044508109","xr_cap":{"address1":"8236425893392219787423825014385198460820517586004442204287421088285469674020926840448786131806503567730307555837801319715555107413533966776756997088003362401505821396887204933829958258785093075846810980429322007441122948459832086015057507926262051365966017173045228232337530339680355717180291794733363148324101203340879842496879728996183974739507710337122557429529832639384077022317326079678153237524335334790193774589523155338216849532635731123476861074950940938322358853287805286272076498390452028019829082291826739453475976800681550225322996208089503815975750152834370138410964418644082923687817510140143620366818252076463572791466640135793621279863114074326681043782582123182032344081138","address2":"30414471804770994051376437296525278254597585112268783700020054398847238843189530750793146903722533375657200785297557019465948393596156534191847866989266176618709331559949972729939131388887244366321127743968836991526071402029914419405781596054783690896660703606768577825229647587998380728894419570361864769440309185637967429191914824558483741394914212983254247799137730101941670911547714088499696084822272226072237693975774997990116374449197382931059877141968595755981160846810650806105803130004361523114137045586548743326078945833123588843296375692506658736851641735658969617721427932961073974202337608798761064528676757519926255271724266286989825397405029723387126754299497661658557574216867","city":"159795636056543233530021344623621334175753173834199599499234503024224170089287815725788337040803537786795901100564559891075793321268703839671526386175533087941057761454903389990043254221508542663884105491028667931433093528378567035675241504608287341705758154859625863922110474313370021277749973041267871971965548396722681397958408458464210449202419266126608057284371794186889175339171087558861231355840830361110708993602208821778313069364112399404445977187422249127909803315019664537899385297653020295835898441614009217452024854561288538496889400595485884757791655246945196819845725103196695608534259378231125159518322706097470964698852674734436475238855630473478573401236177640541599034507313","state":"215512468490315112938301657833926278136808116594771729699898320102646611321724434471863048390556908138905125523936043735201882025532772433002153410083708215401917118972375534193847316461794285777665177963351136804949997738950645361626956052973425101611071191598827068821964513860723502996877635652196651818308886110840798493982976675792164313480547213301748933952971154819253513296456319475340952940914757162158069252461973054465657233683514169036627218211903327888618365019366708902832859985119776192696909319524217085945724819529037625577237504453097885607411726308520123962852327787736505753002450290943635652415448032216336431217538662448209579828135627648861641446385394343199453905348086","zip":"238413810148929820131063264189691178282858328114757399256193590161266006646670344870416481980522447923115217342582281807424862378687793299109363839238237538377362459559820681904274866049652851183765153471969318096511161665533190643665261284892951569998678113101193901664492159340828270692168345719923300987213287650281559452357368956472066676438018575401605560388568884399190765464134955117933339552804676602790359330495723485338924295339609987825045590507344961620812843451249916254642836938597183261177212672766675968705705261108413829152581548433386403050115216912797280460237259161451733151284615735871654022007177671460429253488906111387740833557450384941388970535365310270275589048348152"}}"#,
//        "2018-04-03 15:36:52",
//    ],
//    [
//        "nonce::2hoqvcwupRTUNkXn6ArYzs:Home Address:1.4:2hoqvcwupRTUNkXn6ArYzs::DunkM3x1y7S4ECgSL4Wkru",
//        r#""479607237859275700486395""#,
//        "2018-04-03 15:36:53",
//    ],
    ////DID DunkM3x1y7S4ECgSL4Wkru
//    [
//        "my_did::DunkM3x1y7S4ECgSL4Wkru",
//        r#"{"did":"DunkM3x1y7S4ECgSL4Wkru","verkey":"837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY"}"#,
//        "2018-01-19 21:26:11"
//    ],
//    [
//        "key::837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY",
//        r#"{"verkey":"837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPP7Uk7LfAi6P2ZgcpNMagSN7K1TDc73gkBzdpqvUAmpPnnxRLqXeBZbv"}"#,
//        "2018-01-19 21:26:11"
//    ],
    //DID 2hoqvcwupRTUNkXn6ArYzs
    [
        "my_did::2hoqvcwupRTUNkXn6ArYzs",
        r#"{"did":"2hoqvcwupRTUNkXn6ArYzs","verkey":"vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf"}"#,
        "2018-02-28 04:09:37"
    ],
    [
        "key::vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf",
        r#"{"verkey":"vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPPWbEpqU41NEy3MmoeUuhq6T8F4JuRPgtj3hoT6BBjgnEF4bbhsR84NH"}"#,
        "2018-02-28 04:09:37"
    ],
    ////DID AQ2EZRY9JQ4ssjmZPL5MiU"
//    [
//        "my_did::AQ2EZRY9JQ4ssjmZPL5MiU",
//        r#"{"did":"AQ2EZRY9JQ4ssjmZPL5MiU","verkey":"684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX"}"#,
//        "2018-02-28 04:09:37"
//    ],
//    [
//        "key::684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX",
//        r#"{"verkey":"684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX","signkey":"3GNKQyCswPamSCTPHj9BzJFY3DcXbswXLcteWUNtfgnD4f1rqbLiGTtqpehdg4nxpNz3o3S5iawopUCYbgURTGZT"}"#,
//        "2018-02-28 04:09:37"
//    ],
    ////DID EmapZ8H9S2qPp3JKyfr5z1
//    [
//        "my_did::EmapZ8H9S2qPp3JKyfr5z1",
//        r#"{"did":"EmapZ8H9S2qPp3JKyfr5z1","verkey":"8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq"}"#,
//        "2018-01-19 20:27:15"
//    ],
//    [
//        "key::8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq",
//        r#"{"verkey":"8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPP7Uk7LfAi6PvimpyRHkzenYNbW6eLf5DKWU9mWHFQMWVpMQc7Bq3EL3"}"#,
//        "2018-01-19 20:27:15"
//    ],
//    [
//        "my_did::QgUb4aHJ2cigGZCrEe7DHk",
//        r#"{"did":"QgUb4aHJ2cigGZCrEe7DHk","verkey":"DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q"}"#,
//        "2018-03-12 15:31:34"
//    ],
//    [
//        "key::DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q",
//        r#"{"verkey":"DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q","signkey":"3vSwMtqns4Y8oy6oUZ2Uxmf8aUz4tayb8gSSEUnnbexNZrimVH5HdERSFi2aPdwQgC9ynBbYvBPCkUG2Xq2NapJF"}"#,
//        "2018-03-12 15:31:34"
//    ],
//    [
//        "my_did::GXTZy9GzdtD2c1J88Jrn8C",
//        r#"{"did":"GXTZy9GzdtD2c1J88Jrn8C","verkey":"9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc"}"#,
//        "2018-03-12 15:31:34"
//    ],
//    [
//        "key::9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc",
//        r#"{"verkey":"9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc","signkey":"5QEbR1JPRorcTazTgdH71nQqzVDhHs8cqSzT2at6LeS7soCWBqhu1kFdiKyKaks1qyg5GAsQp3GFScNAAJUCiomJ"}"#,
//        "2018-03-12 15:31:34"
//    ],
];

pub fn setup_dev_env(wallet_name: &str) {
    settings::set_defaults();
    pool::open_sandbox_pool();
    set_institution_dev_config(wallet_name);

    setup_wallet(wallet_name);
    wallet::open_wallet(wallet_name, None).unwrap();
}

pub fn be_consumer() {
    set_consumer_dev_config()
}
pub fn be_institution() {
    /* use the existing wallet */
    set_institution_dev_config(&settings::get_config_value(settings::CONFIG_WALLET_NAME).unwrap());
}

pub fn cleanup_dev_env(wallet_name: &str) {
    settings::set_defaults();
    wallet::close_wallet().unwrap();
    wallet::delete_wallet(wallet_name).unwrap();
    pool::close().unwrap();
    pool::delete(::utils::constants::POOL).unwrap();
}

fn set_institution_dev_config(wallet_name: &str) {
    let institution_logo_url = format!("https://robohash.org/123");
    settings::set_config_value(settings::CONFIG_INSTITUTION_NAME,"Evernym");
    settings::set_config_value(settings::CONFIG_WALLET_NAME, wallet_name);
    settings::set_config_value(settings::CONFIG_AGENCY_ENDPOINT, AGENCY_ENDPOINT);
    settings::set_config_value(settings::CONFIG_AGENCY_DID, AGENCY_DID);
    settings::set_config_value(settings::CONFIG_AGENCY_VERKEY, AGENCY_VERKEY);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_DID, SDK_TO_REMOTE_DID);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_VERKEY, SDK_TO_REMOTE_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_DID, INSTITUTION_DID);
    settings::set_config_value(settings::CONFIG_INSTITUTION_VERKEY, INSTITUTION_VERKEY);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_DID, REMOTE_TO_SDK_DID);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_VERKEY, REMOTE_TO_SDK_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_LOGO_URL, &institution_logo_url);
    settings::set_config_value(settings::CONFIG_GENESIS_PATH, constants::GENESIS_PATH);
}

fn set_consumer_dev_config() {
    /* NOTE: WALLET_NAME stays the same */
    let institution_logo_url = format!("https://robohash.org/456");
    settings::set_config_value(settings::CONFIG_INSTITUTION_NAME,"Evernym");
    settings::set_config_value(settings::CONFIG_AGENCY_ENDPOINT, C_AGENCY_ENDPOINT);
    settings::set_config_value(settings::CONFIG_AGENCY_DID, C_AGENCY_DID);
    settings::set_config_value(settings::CONFIG_AGENCY_VERKEY, C_AGENCY_VERKEY);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_DID, C_SDK_TO_REMOTE_DID);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_VERKEY, C_SDK_TO_REMOTE_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_DID, C_INSTITUTION_DID);
    settings::set_config_value(settings::CONFIG_INSTITUTION_VERKEY, C_INSTITUTION_VERKEY);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_DID, C_REMOTE_TO_SDK_DID);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_VERKEY, C_REMOTE_TO_SDK_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_LOGO_URL, &institution_logo_url);
    settings::set_config_value(settings::CONFIG_GENESIS_PATH, constants::GENESIS_PATH);
}

fn setup_new_wallet_with_new_credential(wallet_name: &str) {
    settings::set_defaults();

    pool::open_sandbox_pool();

    wallet::init_wallet(wallet_name).unwrap();
    let wallet_handle = wallet::get_wallet_handle();

    let (issuer_did, _) = SignusUtils::create_and_store_my_did(wallet_handle, Some(constants::DEMO_ISSUER_PW_SEED)).unwrap();
    SignusUtils::create_and_store_my_did(wallet_handle, Some(constants::DEMO_AGENT_PW_SEED)).unwrap();

    for x in 0..12 {
        let seed = format!("000000000000000000000000Issuer{:02}", x);
        println!("generating did/vk from seed: {}", seed);
        SignusUtils::create_and_store_my_did(wallet_handle, Some(&seed)).unwrap();
    }

    let data = r#"["address1","address2","city","state","zip"]"#.to_string();
    let version = "0.1".to_string();
    let name = "Home Address".to_string();
    let schema_handle = create_new_schema("1", issuer_did.to_string(), name, version, data).unwrap();

    //Todo: change to get_schema_id and update create_cred call
    let schema_seq_no = get_sequence_num(schema_handle).unwrap();

//    create_new_credentialdef("anything".to_string(), "anything".to_string(), schema_seq_no, issuer_did, false).unwrap();
}

pub fn setup_wallet(wallet_name: &str) {
    use std::path::Path;
    use self::rusqlite::Connection;
    use std::env::home_dir;

    let home = home_dir().unwrap();
    let wallet_dir = format!(".indy_client/wallet/{}/sqlite.db", wallet_name);
    let wallet_dir = Path::new(&wallet_dir);
    let wallet_db = home.join(wallet_dir);

    wallet::init_wallet(wallet_name).unwrap();
    let connection = Connection::open(wallet_db.as_path()).unwrap();

    for entry in DEV_ENTRIES {
        connection.execute("INSERT OR REPLACE INTO wallet VALUES (?,?,?)", &[&entry[0].to_string(), &entry[1].to_string(), &entry[2].to_string()]).unwrap();
    }
    connection.close().unwrap();
    wallet::close_wallet().unwrap();
}

#[cfg(test)]
mod tests {
    use super::*;

    #[ignore]
    #[test]
    fn test_dev_env_setup() {
        // Use this test to setup a complete wallet for external use
        setup_dev_env("pyvcx");
        ::utils::libindy::anoncreds::libindy_prover_create_master_secret(::settings::DEFAULT_LINK_SECRET_ALIAS).unwrap();
    }
}
